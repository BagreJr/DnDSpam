<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>¿Qué clase de D&D soy?</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.3/dist/confetti.browser.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js" integrity="sha512-BNaRQnYJYiPSqHHDb58B0yaPfCu+Wgds8Gp/gU33kqBtgNS4tSPHuGibyoeqMV/TJlSKda6FXzoEyYGjTe+vXA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
</head>
<body>
    <div class="container">
        <h2>Descubre tu clase de D&D</h2>

        <!-- Imagen y animación -->
        <div class="image-container">
            <img id="classImage" src="images/default.webp" alt="Clase de D&D">
        </div>
		
        <!-- Texto de la clase -->
        <h3 id="className">? ? ?</h3>
            <p id="classDescription"></p>
            <a id="classLink" href="#" target="_blank" class="hidden">Clase Completa</a>

        <!-- Botón para jugar -->
        <button id="discoverButton">Descubrir mi clase</button>
		<!-- Botón para entrar al Tier List -->
		<button id="tierListButton">Crear Tier List (Clases)</button>
        <button id="subclassTierListButton">Crear Tier List (Subclases)</button>
		<!-- Botón para entrar al Quiz -->
		<button id="quizButton">Iniciar Quiz</button>
		<button id="spellbookButton">Ver Libro de Spells</button>
		<button id="hpCalculatorButton">Calculadora de HP</button>

    <div class="container">
        <h2>Galería de Imágenes</h2>
        <div class="gallery">
			<img src="images/alchemist.webp" alt="alchemist">
			<img src="images/artificer.webp" alt="artificer">
			<img src="images/barbarian.webp" alt="barbarian">
			<img src="images/bard.webp" alt="Bard">
			<img src="images/binder.webp" alt="Binder">
			<img src="images/blood_hunter.webp" alt="blood_hunter">
			<img src="images/captain.webp" alt="captain">
			<img src="images/cleric.webp" alt="cleric">
			<img src="images/commoner.webp" alt="commoner">
			<img src="images/craftsman.webp" alt="craftsman">
			<img src="images/druid.webp" alt="Druid">
			<img src="images/fighter.webp" alt="fighter">
			<img src="images/gadgeteer.webp" alt="gadgeteer">
			<img src="images/gunslinger.webp" alt="gunslinger">
			<img src="images/illriger.webp" alt="illrigger">
			<img src="images/investigador.webp" alt="investigador">
			<img src="images/magus.webp" alt="magus">
			<img src="images/martyr.webp" alt="martyr">
			<img src="images/monk.webp" alt="monk">
			<img src="images/necromancer.webp" alt="necromancer">
			<img src="images/paladin.webp" alt="paladin">
			<img src="images/psion.webp" alt="psionico">
			<img src="images/ranger.webp" alt="ranger">
			<img src="images/rogue.webp" alt="rogue">
			<img src="images/savant.webp" alt="savant">
			<img src="images/sorcerer.webp" alt="sorcerer">
			<img src="images/vagabond.webp" alt="vagabond">
			<img src="images/vessel.webp" alt="vessel">
			<img src="images/warden.webp" alt="Warden">
			<img src="images/warlock.webp" alt="warlock">
			<img src="images/warlord.webp" alt="warlord">
			<img src="images/warmage.webp" alt="warmage">
			<img src="images/witch.webp" alt="witch">
			<img src="images/wizard.webp" alt="wizard">
        </div>
    </div>

    <!-- Modal para mostrar imágenes en grande -->
    <div id="imageModal" class="image-modal">
		<button id="prevImage" class="nav-button">&#10094;</button>
		<button id="nextImage" class="nav-button">&#10095;</button>
        <button id="closeModal" class="close-button">&times;</button>
        <img id="modalImage" src="" alt="">
        <p id="imageCaption" class="image-caption"></p>
    </div>

    </div>
    <!-- Contenedor del Quiz (inicialmente oculto) -->
<div id="quizContainer" class="hidden">
<audio id="quizAudio" src="sound/quiz-start.mp3"></audio>

	<div id="quizProgress">
	<progress id="quizBar" value="0" max="0"></progress>
	<span id="quizRemaining"></span>
	</div>
	<audio id="answerSound" src="sound/answer.mp3"></audio>

    <h2 id="quizTitle">¿Qué clase de D&D eres?</h2>
    <p id="quizQuestion"></p>
    <div id="quizOptions"></div>
    <button id="backButton" class="hidden">Atrás</button>
	   <button id="exitQuiz" class="hidden">Salir</button>
    <div id="quizResult"></div>
</div>

<div id="tierListContainer" class="hidden">
    <h2 id="tierListTitle">Crea tu Tier List</h2>
    
	<div class="tier-controls">
			<button id="addTierRowButton">Añadir Fila</button>
            <button id="downloadTierListButton">Descargar Tier List</button>
			<button id="exitTierListButton">Salir</button>
	</div>
		<h3 style="margin-top: 30px;">Tu tierlist</h3>
			<div id="tierRowsContainer">
					<div class="tier-row">
						<div class="tier-label" contenteditable="true" style="background-color: #ff7f7f;">S</div>
						<button class="delete-tier-row-button">×</button>
						<div class="tier-dropzone"></div>
					</div>
					<div class="tier-row">
						<div class="tier-label" contenteditable="true" style="background-color: #ffbf7f;">A</div>
						<button class="delete-tier-row-button">×</button>
						<div class="tier-dropzone"></div>
					</div>
					<div class="tier-row">
						<div class="tier-label" contenteditable="true" style="background-color: #ffff7f;">B</div>
						<button class="delete-tier-row-button">×</button>
						<div class="tier-dropzone"></div>
					</div>
					<div class="tier-row">
						<div class="tier-label" contenteditable="true" style="background-color: #7fff7f;">C</div>
						<button class="delete-tier-row-button">×</button>
						<div class="tier-dropzone"></div>
					</div>
					<div class="tier-row">
						<div class="tier-label" contenteditable="true" style="background-color: #7fbfff;">D</div>
						<button class="delete-tier-row-button">×</button>
						<div class="tier-dropzone"></div>
					</div>
			</div>
			<h3 style="margin-top: 30px;">Clases (Arrastra a un tier)</h3>
			<div id="itemBank" class="tier-dropzone">
				</div>
		</div>

<div id="spellbookContainer" class="hidden">
    <h2>Libro de Hechizos</h2>
    <div class="tier-controls">
        <button id="exitSpellbookButton">Salir</button>
		
    </div>

    <div id="characterManagement" style="margin: 15px auto; padding: 10px; background-color: #333; border-radius: 5px; width: 90%;">
        <label for="characterSelect" style="margin-right: 10px;">Personaje:</label>
        <select id="characterSelect" style="padding: 5px; background-color: #444; color: white; border: 1px solid #666; border-radius: 3px;"></select>
        <button id="addCharacterButton" style="margin-left: 10px; padding: 5px 10px;">+</button>
        <button id="renameCharacterButton" style="margin-left: 5px; padding: 5px 10px;">Renombrar</button>
        <button id="deleteCharacterButton" style="margin-left: 5px; padding: 5px 10px; background-color:#d9534f; color:white;">Borrar</button>
        <span id="currentCharacterName" style="margin-left: 15px; font-style: italic;"></span> 
    </div>

    <div id="spellControls">
	<button id="toggleFavoritesButton" style="margin-left: 10px; padding: 8px 12px; font-size: 14px; background-color: #f0ad4e; color: white; border: 1px solid #eea236; border-radius: 5px; cursor: pointer;">Ver Favoritos</button>
	<input type="text" id="searchSpell" placeholder="Buscar hechizo por nombre...">
        <select id="filterClass">
            <option value="all">Todas las Clases</option>
            </select>
        <select id="filterLevel">
            <option value="all">Todos los Niveles</option>
            <option value="0">Nivel 0 (Truco)</option>
            <option value="1">Nivel 1</option>
            <option value="2">Nivel 2</option>
            <option value="3">Nivel 3</option>
            <option value="4">Nivel 4</option>
            <option value="5">Nivel 5</option>
            <option value="6">Nivel 6</option>
            <option value="7">Nivel 7</option>
            <option value="8">Nivel 8</option>
            <option value="9">Nivel 9</option>
        </select>
        <select id="filterType">
            <option value="all">Todo Tipo</option>
            <option value="Arcano">Arcano</option>
            <option value="Divino">Divino</option>
            <option value="Primal">Primal</option>
        </select>
		<select id="filterSchool">
                <option value="all">Todas las Escuelas</option>
                </select>
        <select id="filterRitual">
            <option value="all">Ritual (Cualquiera)</option>
            <option value="true">Sí es Ritual</option>
            <option value="false">No es Ritual</option>
        </select>
		<select id="filterDamage">
                <option value="all">Cualquier Tipo de Daño</option>
        </select>
        <select id="sortSpells">
            <option value="name">Ordenar por Nombre (A-Z)</option>
            <option value="level">Ordenar por Nivel (0-9)</option>
        </select>
    </div>
<button id="toggleSpellViewButton" style="padding: 8px 12px; font-size: 14px; background-color: #555; color: white; border: 1px solid #666; border-radius: 5px; cursor: pointer;">Vista Simplificada</button>
    <div id="spellList">
        <p>Cargando hechizos...</p>
    </div>

	<div id="favoriteSpellList" class="hidden">
        <h3>Mis Hechizos Favoritos</h3>
        </div>

</div>
<div id="hpCalculatorContainer" class="hidden">
        <h2>Calculadora Rápida de HP</h2>
        <div class="hp-calc-input-area">
             <h4>Configuración del Personaje</h4>
             <div class="hp-calc-grid">
                 <div>
                     <label for="hpLevelInput">Nivel (1-20):</label>
                     <input type="number" id="hpLevelInput" value="1" min="1" max="20">
                 </div>
                 <div>
                     <label for="hpClassSelect">Clase:</label>
                     <select id="hpClassSelect">
                         <option value="">-- Elige Clase --</option>
                         </select>
                 </div>
                 <div>
                     <label for="hpConModifier">Modificador CON:</label>
                     <input type="number" id="hpConModifier" value="0" min="-5" max="10">
                 </div>
                 <div class="checkbox-group">
                     <input type="checkbox" id="hpIsHillDwarf">
                     <label for="hpIsHillDwarf">Enano Colina (+1/Nivel)</label>
                 </div>
                 <div class="checkbox-group">
                     <input type="checkbox" id="hpHasTough">
                     <label for="hpHasTough">Dote Dureza (+2/Nivel)</label>
                 </div>
                 <div>
                     <label for="hpOtherBonus">Otro Bonus/Nivel:</label>
                     <input type="number" id="hpOtherBonus" value="0" min="0" max="5">
                 </div>
            </div>
        </div>

        <div id="hpCalculatorResults" class="hp-results-box">
            <h3>Puntos de Golpe Máximos</h3>
            <div class="hp-display">
                <div class="hp-value-box">
                    <span class="hp-label">Promedio</span>
                    <span id="hpResultAverage" class="hp-value">--</span>
                </div>
            </div>
            <p><small><strong>Dado Golpe:</strong> <span id="hpResultHitDie">--</span></small></p>
            <p><small><strong>Salvadas:</strong> <span id="hpResultSaves">--</span></small></p>
            <p id="hpCalculationNote" class="hp-calc-note"><small>Selecciona una clase y nivel.</small></p>
        </div>
        <button id="closeHpCalculator">Cerrar Calculadora</button>
    </div>
    <script src="script.js"></script>
    
    <div id="dndAssistant" class="assistant-container">
        
        <div id="assistantBubble" class="assistant-bubble">
            <h5 id="assistantTitle">Consejo para: ???</h5>
            <p id="assistantAdvice">...</p>
            <div id="assistantSubclasses">
                <strong>Fáciles:</strong> <span id="assistantEasy"></span><br>
                <strong>Difíciles:</strong> <span id="assistantHard"></span>
            </div>
        </div>
        <img id="assistantImage" src="assistant/default.webp" alt="Asistente de D&D">
    </div>

    <script src="assistant.js"></script>
</body>
</html>
